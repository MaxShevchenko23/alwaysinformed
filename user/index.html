<!doctype html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="../css/styles.css">
        <script src="../js/index.js"></script>

        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
    </head>
    <body>
        <div class="nav">
            <nav>
                <img class="logo" src="../img/logo template.png">
                <a class="nav-button" href="index.html">
                    Home
                </a>
                <a class="nav-button">
                    World
                </a>
                <a class="nav-button" href="#">
                    Politics
                </a>
                <a class="nav-button" href="#">
                    Business
                </a>
                <a class="nav-button" href="#">
                    Health
                </a>
                <a class="nav-button" id="profile" href="../shared/authorization.html">
                    Log in
                </a>
            </nav>
        </div>
        <main id="main">
            <div class="row">
                <div class="column-1 column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a></a>
                    <h2 class="article-header" >Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column-2 column">
                    <img class="article-image" data-number="2223323" src="img/article preview template.jpg" onclick="test()">
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column-3 column">
                    <a href="article.html?article-id=123456"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
            </div>
            <div class="row">
                <div class="column-3 column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column-1 column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column-2 column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
            </div>
            <div class="row">
                <div class="column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
            </div>
            <div class="row">
                <div class="column-1 column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a></a>
                    <h2 class="article-header" >Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column-2 column">
                    <img class="article-image" data-number="2223323" src="img/article preview template.jpg" onclick="test()">
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column-3 column">
                    <a href="article.html?article-id=123456"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
            </div>
            <div class="row">
                <div class="column-3 column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column-1 column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column-2 column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
            </div>
            <div class="row">
                <div class="column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
                <div class="column">
                    <a href="article.html"><img class="article-image" src="img/article preview template.jpg"></a>
                    <h2 class="article-header">Article header</h2>
                    <p class="article-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam dolor atque ullam laudantium officiis harum animi explicabo! Sed debitis rem corporis ullam modi, cupiditate alias esse aspernatur doloribus, nemo architecto.</p>
                </div>
            </div>
        </main>
        <section>
            <input type="button" onclick="loadArticles()" value="Load more">
        </section>
        <footer>
        <div id="footer">
            <div class="footer_buttons">
                <div class="footer_button">
                    <a>Button</a>
                </div>
                <div class="footer_button">
                    <a>Button</a>
                </div>
                <div class="footer_button">
                    <a>Button</a>
                </div>
                <div class="footer_button">
                    <a>Button</a>
                </div>
                <div class="footer_button">
                    <a>Button</a>
                </div>
                <div class="footer_button">
                    <a>Button</a>
                </div>
                <div class="footer_button">
                    <a>Button</a>
                </div>
            </div>
            <div class="copy">
                <span> &copy; FuryDevelop 2023</span>
            </div>
        </div>
    </footer>
    </body>
     <script>
        const columns = document.getElementsByClassName('column');
        const main = document.getElementById('main');

        
        window.onload = loadArticles()
        function loadArticles(){
            checkCredetials();
            const pageNumber = 0;
            main.innerText+='asdfasdfasdfasdf';
            //почитать про closures в js

            fetch(`https://localhost:7115/api/user/articles/filter?pageNumber=${pageNumber+1}&pageSize=10`)
            .then(response => response.json())
            .then(data => {
                    console.log(data);

                    if (data.length === 0) {
                        alert('Нет доступных статей для отображения.');
                        return;
                    }


                    for (let i = 0; i < data.length; i++) 
                    {
                        if (i >= columns.length) 
                        {
                            break; 
                        }

                        const article = data[i];
                        columns[i].innerHTML += `<a href="${'article.html?article-url=' + article.url}"><img class="article-image" src="${article.image}" alt="image"></a>
                            <h2 class="article-header">${article.title}</h2>
                            <p class="article-content">${article.shortDescription}</p>`;
                    }
    })
    .catch(error => {
        console.error('Произошла ошибка при выполнении запроса:', error);
    });

        };

    </script>
</html>